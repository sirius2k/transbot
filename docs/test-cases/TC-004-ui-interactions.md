# TC-004: UI 인터랙션

- **작성일**: 2026-02-08
- **작성자**: QA Team
- **마지막 업데이트**: 2026-02-08
- **상태**: ✅ 완료
- **우선순위**: P1 (High)
- **예상 실행 시간**: 1분 미만

## 개요

### 테스트 목적

사용자가 TransBot의 UI 요소(버튼, 체크박스, 입력 필드 등)와 상호작용할 때 예상대로 동작하는지 검증합니다. 버튼 클릭, 입력 필드 초기화, 사이드바 옵션 선택 등 기본적인 UI 인터랙션의 정상 동작을 확인합니다.

### 테스트 범위

- **UI 렌더링**: 버튼, 체크박스 등 UI 요소 표시 확인
- **사용자 인터랙션**: 클릭, 입력, 선택 등 사용자 동작 처리

### 관련 FEATURE

- FEATURE-001: 영어 ↔ 한국어 양방향 번역 (번역 버튼)
- FEATURE-004: 다중 스타일 번역 (스타일 체크박스)

## 전제 조건

- [ ] Streamlit 앱이 실행 중이어야 함 (`http://localhost:8501`)
- [ ] 브라우저가 JavaScript를 지원해야 함

## 테스트 시나리오

### 시나리오 1: 지우기 버튼 동작

**Given** (전제 조건)

- Streamlit 앱이 실행 중
- 페이지가 정상적으로 로드됨
- 입력 필드에 텍스트가 있음

**When** (실행 동작)

- 사용자가 "Hello World" 텍스트를 입력
- "🗑️ 지우기" 버튼을 클릭

**Then** (예상 결과)

- 입력 필드가 비워짐
- 통계 정보가 초기화됨 (0자 / 0 토큰)

---

### 시나리오 2: 번역 버튼 활성화/비활성화

**Given** (전제 조건)

- Streamlit 앱이 실행 중
- 페이지가 정상적으로 로드됨

**When** (실행 동작)

- 입력 필드를 비워둠

**Then** (예상 결과)

- "번역하기" 버튼이 표시됨
- 빈 입력에도 버튼 클릭은 가능함 (Streamlit 특성)

---

### 시나리오 3: 사이드바 체크박스 선택

**Given** (전제 조건)

- Streamlit 앱이 실행 중
- 페이지가 정상적으로 로드됨
- 사이드바가 열려 있음

**When** (실행 동작)

- 사이드바에서 "📱 자연스러운 구어체" 체크박스를 선택

**Then** (예상 결과)

- 체크박스가 선택 상태로 변경됨
- 스타일 경고 메시지가 사라짐 (최소 1개 선택 조건 충족)

---

### 시나리오 4: 여러 스타일 체크박스 선택

**Given** (전제 조건)

- Streamlit 앱이 실행 중
- 페이지가 정상적으로 로드됨
- 사이드바가 열려 있음

**When** (실행 동작)

- "📱 자연스러운 구어체" 체크박스를 선택
- "📋 공식/문서용" 체크박스를 선택

**Then** (예상 결과)

- 두 체크박스 모두 선택 상태로 변경됨
- 스타일 경고 메시지가 표시되지 않음

---

### 시나리오 5: 입력 필드 포커스 및 입력

**Given** (전제 조건)

- Streamlit 앱이 실행 중
- 페이지가 정상적으로 로드됨

**When** (실행 동작)

- 입력 필드를 클릭
- "Test input" 텍스트를 입력

**Then** (예상 결과)

- 입력 필드에 텍스트가 표시됨
- 통계 정보가 실시간으로 업데이트됨

## 테스트 데이터

### 입력 데이터

| 항목 | 값 | 설명 |
| ---- | -- | ---- |
| 간단한 텍스트 | "Hello World" | 지우기 버튼 테스트용 |
| 영어 텍스트 | "Test input" | 입력 필드 테스트용 |

### 예상 결과

| 시나리오 | 예상 결과 | 검증 방법 |
| -------- | --------- | --------- |
| 지우기 버튼 | 입력 필드 비워짐, 0자 표시 | 입력 필드 값 확인 |
| 번역 버튼 | 버튼 표시됨 | 버튼 존재 확인 |
| 체크박스 선택 | 체크 상태 변경 | 체크박스 상태 확인 |
| 여러 체크박스 | 모두 선택됨 | 각 체크박스 상태 확인 |
| 입력 필드 | 텍스트 표시 및 통계 업데이트 | 필드 값 및 통계 확인 |

## UI 선택자 (Playwright 참고)

| 엘리먼트 | 선택자 | 설명 |
| -------- | ------ | ---- |
| 입력 필드 | `textarea` | 메인 입력 영역 |
| 번역 버튼 | `button:has-text("번역하기")` | 번역 실행 버튼 |
| 지우기 버튼 | `button:has-text("🗑️ 지우기")` | 입력 초기화 버튼 |
| 사이드바 열기 버튼 | `[data-testid="collapsedControl"]` | 사이드바 토글 버튼 |
| 자연스러운 구어체 체크박스 | `label:has-text("자연스러운 구어체")` | 구어체 스타일 |
| 공식/문서용 체크박스 | `label:has-text("공식/문서용")` | 공식 스타일 |
| 통계 정보 영역 | 페이지 컨텐츠 | "자" 또는 "토큰" 텍스트 검색 |

**참고**: Streamlit은 동적으로 HTML을 생성하므로 페이지 컨텐츠 검색을 사용합니다.

## 실행 방법

### 수동 테스트

1. **앱 실행**

   ```bash
   streamlit run app.py
   ```

2. **시나리오 1 검증: 지우기 버튼**
   - [ ] "Hello World" 입력
   - [ ] "🗑️ 지우기" 버튼 클릭
   - [ ] 입력 필드 비워짐 확인
   - [ ] 통계 "0자" 확인

3. **시나리오 2 검증: 번역 버튼 표시**
   - [ ] 입력 필드 비우기
   - [ ] "번역하기" 버튼 표시 확인

4. **시나리오 3 검증: 체크박스 선택**
   - [ ] 사이드바 열기
   - [ ] "📱 자연스러운 구어체" 체크
   - [ ] 체크 상태 확인

5. **시나리오 4 검증: 여러 체크박스**
   - [ ] "📱 자연스러운 구어체" 체크
   - [ ] "📋 공식/문서용" 체크
   - [ ] 두 체크박스 모두 선택됨 확인

6. **시나리오 5 검증: 입력 필드**
   - [ ] 입력 필드 클릭
   - [ ] "Test input" 입력
   - [ ] 텍스트 표시 및 통계 업데이트 확인

### 자동 테스트 (pytest-bdd + Playwright)

#### 실행 방법

```bash
# Streamlit 앱 실행 (별도 터미널)
streamlit run app.py

# 전체 feature 실행
pytest tests/integration/step_defs/test_ui_interactions.py --browser chromium --no-cov -v

# 특정 시나리오만 실행
pytest tests/integration/step_defs/test_ui_interactions.py -k "지우기" --browser chromium --no-cov -v
```

## 주의사항

- **Streamlit 특성**: 버튼 클릭 시 전체 페이지가 리렌더링되므로 `wait_for_timeout` 사용 필요
- **사이드바 상태**: 테스트 시작 시 사이드바가 닫혀있을 수 있으므로 명시적으로 열기
- **체크박스 선택**: Streamlit 체크박스는 label을 클릭해야 하며, input은 숨겨져 있음
- **입력 필드 초기화**: "지우기" 버튼은 세션 상태를 초기화하므로 페이지 새로고침 효과

## 변경 이력

| 날짜 | 변경 내용 | 작성자 |
| ---- | --------- | ------ |
| 2026-02-08 | 초안 작성 | QA Team |

---

**마지막 업데이트**: 2026-02-08
