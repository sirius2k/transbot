# FEATURE-018: 중국어 번역 지원 (간체자, 단방향)

## 개요

- **기능명**: 중국어 번역 지원 (간체자, 단방향)
- **상태**: 🔲 예정
- **분류**: 백엔드+프론트엔드
- **우선순위**: P2 (보통)
- **복잡도**: Simple (1-3h)
- **분석 수준**: 없음
- **진행률**: 0%
- **예상 시간**: 2.5시간
- **실제 소요**: - (완료 후 기록)
- **시작일**: -
- **완료일**: -

## 기능 설명

중국어(간체자) 문서를 읽고 번역할 수 있도록 언어 지원을 확장합니다. 중국어 → 한국어, 중국어 → 영어 번역만 지원하며 (단방향), 중국어 자동 감지 기능과 UI 언어 선택 옵션을 추가합니다.

### 핵심 가치

- **입력 언어 확장**: 중국어 문서를 읽고 이해할 수 있음
- **단방향 번역**: 중국어 → 한국어/영어만 지원 (역방향 미지원)
- **자동 감지**: 중국어 텍스트를 자동으로 감지
- **간편한 UI**: 언어 선택 드롭다운에 중국어 옵션 추가

## 작업(Task) 분해

### Task 18.1: 중국어 감지 로직 추가

**분류**: 백엔드

**의존성**: 없음

**작업 내용**:
1. `utils.py`의 `detect_language()` 함수 수정
   - 중국어 간체자 유니코드 범위 추가 (`\u4e00`-`\u9fff`)
   - 중국어 감지 시 "Chinese" 반환
2. 감지 우선순위: 한국어 > 중국어 > 영어 > unknown
3. 기존 한국어/영어 감지 로직 유지

**예상 파일**:
- `utils.py`: `detect_language()` 함수 수정

**예상 시간**: 30분

---

### Task 18.2: LanguageDetector에 중국어 번역 방향 설정

**분류**: 백엔드

**의존성**: Task 18.1

**작업 내용**:
1. `components/language.py`의 `DIRECTION_CONFIG`에 중국어 추가
   - source: "Chinese"
   - target: "Korean" (기본값)
   - arrow: "🇨🇳 → 🇰🇷"
   - code: "zh"
   - flag: "🇨🇳"
2. 중국어 감지 시 자동으로 한국어로 번역 방향 설정

**예상 파일**:
- `components/language.py`: `DIRECTION_CONFIG` 딕셔너리 수정

**예상 시간**: 15분

---

### Task 18.3: UI에 중국어 언어 선택 옵션 추가

**분류**: 프론트엔드

**의존성**: Task 18.2

**작업 내용**:
1. `app.py`의 언어 선택 UI 수정
   - 수동 번역 방향 선택 시 중국어 옵션 추가
   - "Chinese (简体中文)" 라벨 표시
2. 번역 방향 조합 추가:
   - 중국어 → 한국어
   - 중국어 → 영어
   - (한국어/영어 → 중국어는 제외)

**예상 파일**:
- `app.py`: 언어 선택 UI 부분 수정

**예상 시간**: 30분

---

### Task 18.4: 중국어 번역 프롬프트 작성

**분류**: 백엔드

**의존성**: Task 18.2

**작업 내용**:
1. `components/translation.py`의 번역 프롬프트에 중국어 지원 추가
   - 중국어 → 한국어 번역 프롬프트
   - 중국어 → 영어 번역 프롬프트
2. 간체자 명시 (번체자 변환 불필요)
3. 기존 영어/한국어 번역 프롬프트 품질 유지

**예상 파일**:
- `components/translation.py`: 번역 프롬프트 수정

**예상 시간**: 15분

---

### Task 18.5: 단위 테스트 작성

**분류**: 테스트

**의존성**: Task 18.1, 18.2

**작업 내용**:
1. `tests/test_utils.py`에 중국어 감지 테스트 추가
   - 순수 중국어 텍스트 감지
   - 중국어 + 영어 혼합 텍스트
   - 중국어 + 한국어 혼합 텍스트
2. `tests/test_language.py`에 중국어 번역 방향 테스트 추가
   - `get_translation_direction()` 중국어 케이스
   - `get_language_info()` 중국어 케이스
3. 기존 테스트 모두 통과 확인

**예상 파일**:
- `tests/test_utils.py`: 중국어 감지 테스트
- `tests/test_language.py`: 중국어 번역 방향 테스트

**예상 시간**: 45분

---

### Task 18.6: 문서 업데이트

**분류**: 문서화

**의존성**: Task 18.5

**작업 내용**:
1. `README.md` 업데이트
   - 지원 언어에 "중국어(간체자)" 추가
   - 중국어 번역 예시 추가
2. `CLAUDE.md` 업데이트
   - 중국어 감지 로직 설명 추가
3. `PRD.md` 완료 표시 업데이트 (🔲 → ✅)

**예상 파일**:
- `README.md`
- `CLAUDE.md`
- `PRD.md`

**예상 시간**: 15분

---

## 작업 흐름도

```text
Task 18.1 (중국어 감지 로직)
    ↓
Task 18.2 (번역 방향 설정) ─────┐
    ↓                            ↓
Task 18.3 (UI 옵션 추가)  Task 18.4 (번역 프롬프트)
    ↓                            ↓
Task 18.5 (단위 테스트) ←────────┘
    ↓
Task 18.6 (문서화)
```

## 완료 기준

### 기능 완료 기준

- [ ] 중국어 텍스트 자동 감지 동작
- [ ] 중국어 → 한국어 번역 정상 동작
- [ ] 중국어 → 영어 번역 정상 동작
- [ ] UI에서 중국어 수동 선택 가능
- [ ] 한국어/영어 → 중국어 번역은 선택 불가

### 품질 기준

- [ ] 모든 단위 테스트 통과
- [ ] 기존 영어/한국어 번역 기능 정상 동작
- [ ] 코드 커버리지 80% 이상 유지
- [ ] 린팅 통과

### 문서화 기준

- [ ] README.md에 중국어 지원 명시
- [ ] CLAUDE.md에 중국어 감지 로직 설명
- [ ] PRD.md 완료 표시 업데이트

## 테스트 계획

### 단위 테스트

| 테스트 케이스 | 시나리오 | 예상 결과 |
|--------------|----------|-----------|
| test_detect_chinese_simplified | "你好世界" 입력 | "Chinese" 반환 |
| test_detect_chinese_mixed_english | "Hello 世界" 입력 | "Chinese" 반환 (중국어 비율 높음) |
| test_detect_chinese_mixed_korean | "안녕 世界" 입력 | "Korean" 반환 (한국어 우선) |
| test_translation_direction_chinese | 중국어 텍스트 입력 | (Chinese, Korean, 🇨🇳→🇰🇷) 반환 |
| test_chinese_to_korean_translation | 중국어 → 한국어 번역 | 정상 번역 결과 |
| test_chinese_to_english_translation | 중국어 → 영어 번역 | 정상 번역 결과 |

### 통합 테스트

| 테스트 케이스 | 시나리오 | 예상 결과 |
|--------------|----------|-----------|
| 중국어 자동 감지 + 번역 | "你好，世界！" 입력 후 번역 버튼 클릭 | "안녕하세요, 세계!" 또는 "Hello, World!" 번역 |
| UI 중국어 수동 선택 | 드롭다운에서 "Chinese" 선택 | 중국어 → 한국어/영어 옵션만 표시 |
| 기존 기능 유지 | 영어/한국어 텍스트 번역 | 기존과 동일하게 동작 |

---

**작성일**: 2026-02-02
**최종 수정일**: 2026-02-02
**작성자**: TransBot Development Team
