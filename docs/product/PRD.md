# TransBot - 스마트 번역 솔루션

- 작성자: TransBot Development Team
- 버전: 3.0
- 최초 작성일: 2026년 1월 24일

## 1. 개요 (Overview)

TransBot은 Streamlit 기반의 영어-한국어 양방향 번역 웹 애플리케이션입니다.

번역을 원하는 텍스트를 입력하면 **즉시 번역하여 결과를 보여줍니다**. OpenAI 및 Azure OpenAI Service를 지원하며, 다양한 AI 모델 선택과 Markdown 포맷 보존 기능을 제공합니다.

### 핵심 가치

#### 현재 제공 중인 가치

| 가치 | 설명 |
| ---- | ---- |
| **즉시 번역** | 원문 텍스트를 붙여넣기하면 즉시 번역본 확인 |
| **빠른 복사** | 번역된 내용을 원클릭으로 복사하여 다른 곳에 활용 |
| **직관적 UI** | 간단하고 직관적인 인터페이스로 빠른 번역 |
| **Markdown 지원** | Markdown 포맷을 보존하여 기술 문서 번역에 최적화 |
| **다중 Provider** | OpenAI와 Azure OpenAI Service 모두 지원 |
| **관찰성 확보** | Langfuse를 통한 LLM 사용 내역 추적, 비용 분석, 품질 모니터링 |

#### 향후 제공 예정

| 가치 | 설명 |
| ---- | ---- |
| **사전 검색** | 단어만 입력 시 사전을 검색하여 뜻을 빠르게 확인 |
| **히스토리 관리** | 번역 및 사전 검색 내용의 이력 관리, 그룹핑, 조회 |
| **파일 번역** | 로컬 파일을 업로드하여 일괄 번역 |
| **외부 툴 연동** | Notion, Confluence 등 외부 도구에 저장 |

## 2. 문제 정의 (Problem Definition)

기존 번역 웹앱과 서비스들은 다음과 같은 한계를 가지고 있습니다.

### 2.1 사용자 경험 문제

- **커스터마이징 불가**: 번역 기능 자체는 잘 동작하지만, 사용자가 원하는대로 UI를 변경하거나 기능을 추가할 수 없음
- **히스토리 부재**: LLM을 통해 번역을 요청하지만, 어떤 번역을 요청했는지 이력을 확인할 수 없음
- **비용 불투명**: API 사용량과 비용을 사전에 예측하기 어려움

### 2.2 번역 품질 문제

- **도메인 특화 부족**: 여러 업무에 쓰이는 고유한 용어를 모르기 때문에 번역이 매끄럽지 않음
- **사전 기능 부재**: 단어의 뜻만 빠르게 확인하고 싶을 때 별도의 사전 서비스를 이용해야 함

### 2.3 업무 통합 문제

- **파일 번역 제한**: 로컬 파일, 구글 드라이브, Confluence 등 외부 저장소의 파일을 빠르게 번역하기 어려움
- **글자 수 제한**: 기존 번역 서비스의 최대 입력 글자 수 제한으로 긴 문서 번역이 불편함
- **결과 활용 제한**: 번역 결과를 다른 도구로 전송하거나 체계적으로 관리하기 어려움

## 3. 타겟 사용자 (Target User)

### 3.1 핵심 사용자 페르소나

번역을 필요로 하고, 앱을 자유롭게 커스터마이징하고 싶은 개발자

### 3.2 사용 사례 (Use Cases)

- 사용자로서, 원본 텍스트를 붙여넣기하면 즉시 번역본을 보고 싶다. 왜냐하면 빠르게 번역 결과를 확인하기 위해서이다.
- 사용자로서, 번역된 내용을 원클릭으로 복사하고 싶다. 왜냐하면 다른 곳에 쉽게 붙여넣기 하기 위해서이다.
- 사용자로서, 단어만 입력했을 때 사전 검색 결과를 보고 싶다. 왜냐하면 단어의 뜻만 빠르게 확인하기 위해서이다.
- 사용자로서, 이전 번역 히스토리를 조회하고 싶다. 왜냐하면 과거 번역 내용을 다시 활용하기 위해서이다.
- 사용자로서, 번역 결과를 외부 툴(Notion, Confluence 등)에 저장하고 싶다. 왜냐하면 업무 도구와 연동하여 효율적으로 관리하기 위해서이다.
- 사용자로서, 긴 문서도 글자 수 제한 없이 번역하고 싶다. 왜냐하면 기존 번역 서비스의 제한을 넘어 전체 문서를 한 번에 번역하기 위해서이다.

## 4. 성공 지표 (Goals and Success Criteria)

### 4.1 성공 지표

개발 후 1개월 내에 번역 관련 유료 서비스 의존도를 최소화하고, 번역 업무를 효율적으로 자동화하는 것을 목표로 합니다.

### 4.2 핵심 지표

| 지표 | 목표 | 측정 기간 |
| ---- | ---- | --------- |
| 유료 번역 툴 사용 비중 | 10% 이내로 감소 | 개발 후 1개월 |
| 번역 관련 업무 자동화 | 95% 이상 달성 | 지속 |

### 4.3 서비스 품질 지표

| 지표 | 목표 |
| ---- | ---- |
| 번역 완료율 | 95% 이상 |
| 평균 응답 시간 | 5초 이내 |
| 에러 발생률 | 5% 이하 |

## 5. 현재 구현 상태 (Phase 1.5)

### 5.1 우선순위 체계

| 등급 | 의미 | 설명 |
| ---- | ---- | ---- |
| **P0** | 필수 (Must Have) | 서비스 핵심 기능 |
| **P1** | 높음 (Should Have) | 사용자 가치 높음 |
| **P2** | 중간 (Could Have) | 있으면 좋은 기능 |
| **P3** | 낮음 (Nice to Have) | 향후 고려 |

### 5.2 완료된 기능

#### 주요 기능 (Feature-based Development)

2시간 이상 소요되거나 여러 파일 수정이 필요한 기능은 FEATURE-XXX로 관리됩니다.

| 기능 | 우선순위 | 선정 이유 |
| ---- | -------- | --------- |
| ✅ FEATURE-001: [영어 ↔ 한국어 양방향 번역](../feature-execution-plan/FEATURE-001.md) | **P0** | 서비스의 핵심 존재 이유 |
| ✅ FEATURE-002: [자동 언어 감지](../feature-execution-plan/FEATURE-002.md) | **P0** | 사용자 편의성의 핵심 |
| ✅ FEATURE-006: [번역 결과 듀얼 복사 버튼](../feature-execution-plan/FEATURE-006.md) | **P0** | Use Case 직접 충족 |
| ✅ FEATURE-003: [다양한 AI 모델 선택](../feature-execution-plan/FEATURE-003.md) | **P1** | 비용/품질 선택권 제공 |
| ✅ FEATURE-005: [Markdown 포맷 지원 및 보존](../feature-execution-plan/FEATURE-005.md) | **P1** | 개발자 대상 기술 문서에 필수 |
| ✅ FEATURE-009: [환경 변수 기반 설정 관리 시스템](../feature-execution-plan/FEATURE-009.md) | **P1** | 하드코딩 제거, 환경별 설정 분리 |
| ✅ FEATURE-008: [Azure OpenAI Service 지원](../feature-execution-plan/FEATURE-008.md) | **P1** | 기업 환경(Azure) 사용자 지원. OpenAI/Azure 간 유연한 전환 |
| ✅ FEATURE-004: [글자수/토큰수 실시간 표시](../feature-execution-plan/FEATURE-004.md) | **P2** | 비용 예측 보조 기능 |
| ✅ FEATURE-007: [사이드바 UI (설정 섹션)](../feature-execution-plan/FEATURE-007.md) | **P2** | UI 레이아웃 구성 요소 |
| ✅ FEATURE-016: [Langfuse 연동 (LLM 관찰성)](../feature-execution-plan/FEATURE-016.md) | **P1** | LLM 사용 추적, 비용 분석, 품질 모니터링, 프롬프트 최적화. 운영 인사이트 확보 |
| ✅ FEATURE-017: [구조화된 로깅 시스템](../feature-execution-plan/FEATURE-017.md) | **P1** | API 호출, 에러, 사용자 행동 추적. 디버깅 및 모니터링 인프라. 운영 안정성 확보 |

#### 마이너 개선사항 (Quick Wins)

1-2시간 이내 완료 가능한 간단한 개선사항은 별도 FEATURE 문서 없이 관리됩니다.

| 개선사항 | 우선순위 | 소요 시간 | 설명 | 이슈 |
| -------- | -------- | --------- | ---- | ---- |
| ✅ 지우기 버튼 | **P1** | 30분 | 입력 및 번역 결과 초기화, 사용성 개선 | - |
| ✅ 콘솔에서의 로깅 간소화 | **P2** | 10분 | 콘솔과 파일에 서로 다른 포맷터 적용. 콘솔은 사람이 읽기 쉬운 형식, 파일은 JSON 유지 | - |
| ✅ UI 레이아웃 개선 - 안내 문구 | **P2** | 30분 미만 | 안내 문구를 사이드바의 Help 섹션으로 이동. 메인 화면이 더 깔끔하게 정리됨 | - |

### 5.3 향후 개발 예정

#### 마이너 개선사항 (예정)

| 개선사항 | 우선순위 | 소요 시간 | 설명 | 이슈 |
| -------- | -------- | --------- | ---- | ---- |
| 🔲 번역 결과 포맷팅 | **P2** | 1시간 | 번역 결과를 자동으로 포맷팅하여 출력 (줄바꿈, 들여쓰기 보존). 포맷 제거 옵션 제공 | [#57](https://github.com/sirius2k/transbot/issues/57) |

#### 주요 기능 (FEATURE)

| 기능 | 우선순위 | 선정 이유 | Phase |
| ---- | -------- | --------- | ----- |
| 🔲 FEATURE-010: 번역 히스토리 저장 및 관리 | **P1** | Use Case 직접 충족. 즐겨찾기 등 후속 기능의 기반 인프라 | 2 |
| 🔲 FEATURE-011: 사전 검색 기능 | **P1** | Use Case 직접 충족. 독립적 구현 가능 | 2 |
| 🔲 FEATURE-012: 즐겨찾기 기능 | **P2** | 편의 기능. 히스토리 기능에 의존 | 2.5 |
| 🔲 FEATURE-013: 파일 업로드 일괄 번역 | **P2** | "글자 수 제한 없이 번역" Use Case 충족 | 2.5 |
| 🔲 FEATURE-014: 외부 툴 연동 (Notion, Confluence 등) | **P2** | Use Case 직접 충족. 각 플랫폼 API 연동 필요로 복잡도 높음 | 3 |
| 🔲 FEATURE-015: 용어집(Glossary) 기능 | **P3** | 고급 사용자 대상. 번역 품질 향상 | 3 |
| 🔲 FEATURE-018: 중국어 번역 지원 (간체자, 단방향) | **P2** | 중국어 문서 읽기 지원. 중국어→한국어/영어 번역만 제공. 입력 언어 확장 | 2.5 |
| 🔲 FEATURE-019: UI 다국어 지원 (한국어/영어) | **P3** | 브라우저 언어 자동 감지 + 수동 전환. 쿠키 저장으로 설정 유지. 전역 사용자 경험 개선 | 2.5 |
| 🔲 FEATURE-020: 실시간 번역 결과 출력 | **P2** | 실시간 응답 표시로 체감 대기 시간 단축. 긴 번역 시 진행 상황 확인 가능. 중단 버튼으로 사용자 제어권 향상 | 2.5 |
| 🔲 FEATURE-021: 번역 품질 및 스타일 설정 | **P2** | 사용자가 번역 품질(빠름/균형/정확), 스타일(직역↔자연스러움), 문체(존댓말/반말, 격식/캐주얼), 용어 일관성, 형식 유지를 직관적으로 선택 가능. 프롬프트 자동 최적화로 번역 품질 향상 | 2.5 |
| 🔲 FEATURE-023: 대화 상황별 번역 옵션 | **P2** | 대화 맥락을 반영한 번역 품질 향상. AI 기반 상황 분석으로 적절한 문체 자동 선택 | 2.5 |

### 5.4 권장 개발 순서

```text
Phase 2 (P1 기능)
├── FEATURE-010: 번역 히스토리 저장 및 관리    ← 다른 기능의 기반, 독립적 개발 가능
└── FEATURE-011: 사전 검색 기능                ← 독립적, 병렬 개발 가능

Phase 2.5 (P2-P3 기능 - 편의성 개선)
├── FEATURE-012: 즐겨찾기 기능                 ← FEATURE-010 완료 후
├── FEATURE-013: 파일 업로드 일괄 번역
├── FEATURE-018: 중국어 번역 지원              ← 독립적, 언어 확장
├── FEATURE-019: UI 다국어 지원                ← 독립적, UX 개선
├── FEATURE-020: 실시간 번역 결과 출력         ← 독립적, 체감 성능 개선
├── FEATURE-021: 번역 품질 및 스타일 설정     ← 독립적, 번역 품질 향상
└── FEATURE-023: 대화 상황별 번역 옵션         ← 독립적, AI 기반 맥락 분석

Phase 3 (P2 기능 - 외부 연동)
├── FEATURE-014: 외부 툴 연동 (Notion 우선)    ← 가장 범용적인 것부터
└── FEATURE-015: 용어집(Glossary) 기능
```

### 5.5 취소된 기능

개발을 계획했으나 우선순위 재조정, 기술적 판단, 비용 대비 효과 등의 이유로 구현하지 않기로 결정한 기능들입니다.

| 기능 | 원 우선순위 | 취소 이유 | 취소일 |
| ---- | ----------- | --------- | ------ |
| ~~FEATURE-022: Langfuse V3 업그레이드~~ | P1 | Langfuse V2가 프로덕션에서 안정적으로 동작 중. V3는 ClickHouse를 필수로 요구하며 macOS 로컬 환경에서 호환성 문제 발생. 소규모 프로젝트에 불필요한 인프라 복잡도 증가로 V2 유지 결정 | 2026-02-06 |

> **참고**: 취소된 기능의 상세 계획 문서는 [docs/feature-execution-plan/cancelled/](../feature-execution-plan/cancelled/) 폴더에 보관됩니다.

## 6. 개발 인프라 및 품질 관리

### 6.1 아키텍처 구조

#### 하이브리드 아키텍처 설계 (Phase 1.5 완료)

프로젝트는 인라인 코드에서 **하이브리드 아키텍처**로 발전했습니다.

##### UI 레이어 (함수 기반)

- **app.py**: 15개 함수로 구조화된 UI 오케스트레이션
  - 5개 섹션: Helper Functions, Configuration, UI Rendering, Logic, Main
  - main() 함수가 9단계 흐름 조율
  - 427줄, 모든 함수에 타입 힌트 및 docstring 적용

##### 비즈니스 로직 레이어 (클래스 기반)

| 컴포넌트 | 책임 | 주요 기능 |
| -------- | ---- | --------- |
| `LanguageDetector` | 언어 감지 및 번역 방향 관리 | 자동 언어 감지, 번역 방향 결정, 언어 코드 변환 |
| `TextAnalyzer` | 텍스트 분석 및 통계 생성 | 토큰 카운팅, 통계 계산, Markdown 처리 |
| `TranslationManager` | 번역 작업 관리 | OpenAI 클라이언트 관리, 번역 실행, 모델 설정 |

#### 아키텍처 개선 효과

- **명확한 책임 분리**: 함수 기반 UI + 클래스 기반 비즈니스 로직
- **코드 중복 제거**: 언어 감지 로직 20줄 → 1줄로 간소화
- **관심사 분리**: UI(app.py), 비즈니스 로직(components), 유틸리티(utils.py) 3계층 구조
- **재사용성 향상**: 클래스 인스턴스를 통한 설정 공유 및 재사용
- **테스트 용이성**: 각 컴포넌트별 독립적인 단위 테스트
- **확장성 준비**: Azure OpenAI 지원 등 향후 기능 확장 기반 마련

### 6.2 테스트 및 품질 관리

**테스트 프레임워크**: pytest 기반 단위 테스트

**코드 품질 기준**:

| 지표 | 목표 | 현재 상태 (2026-01-31) |
| ---- | ---- | ----------------------- |
| 코드 커버리지 | 80% 이상 | ✅ **98%** 달성 |
| 총 테스트 수 | 모든 핵심 함수 및 클래스 | ✅ **76개** 완료 |

**테스트 대상**: utils.py, components/ (language, text, translation), config.py

**리포트**: htmlcov/ 폴더에서 커버리지 및 테스트 결과 확인 가능

---

**최종 수정일시**: 2026-02-06 (FEATURE-023 추가)
